specVersion: 0.0.2
description: tracks pool creation, new auctions bids, payouts, etc.
repository: https://github.com/princesinha19/pooled-loan
schema:
  file: schema.graphql
dataSources:
  - kind: ethereum/contract
    name: loanPoolFactory
    network: kovan
    source:
      address: "0xd692f4B47579cd47eaC18C20Bb85Eee0172f228a"
      abi: loanPoolFactory
      startBlock: 21557100
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - LoanPool
      abis:
        - name: loanPoolFactory
          file: loanPoolFactory/abis/loanPoolFactory.json
      eventHandlers:
        - event: NewLoanPool(uint256,address,uint256,uint256,uint256,uint256,uint8,address,string,address,uint256)
          handler: handleNewLoanPool
      file: loanPoolFactory/loanPoolFactory.wasm
templates:
  - name: LoanPoolAave
    kind: ethereum/contract
    network: kovan
    source:
      abi: LoanPoolAave
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: templates/LoanPoolAave/LoanPoolAave.wasm
      entities:
        - Participant
        - Bid
        - LoanClaimed
        - FinalYieldClaimed
      abis:
        - name: LoanPoolAave
          file: LoanPoolAave/abis/LoanPoolAave.json
      eventHandlers:
        - event: NewParticipant(address)
          handler: handleNewParticipation
        - event: NewBidder(address,uint256,uint256,uint256)
          handler: handleNewBid
        - event: ClaimedLoan(address,uint256,uint256)
          handler: handleLoanClaimed
        - event: ClaimedFinalYield(address,uint256)
          handler: handleClaimedFinalYield
  - name: LoanPoolMstable
    kind: ethereum/contract
    network: kovan
    source:
      abi: LoanPoolMstable
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: templates/LoanPoolMstable/LoanPoolMstable.wasm
      entities:
        - Participant
        - Bid
        - LoanClaimed
        - FinalYieldClaimed
      abis:
        - name: LoanPoolMstable
          file: LoanPoolMstable/abis/LoanPoolMstable.json
      eventHandlers:
        - event: NewParticipant(address)
          handler: handleNewParticipation
        - event: NewBidder(address,uint256,uint256,uint256)
          handler: handleNewBid
        - event: ClaimedLoan(address,uint256,uint256)
          handler: handleLoanClaimed
        - event: ClaimedFinalYield(address,uint256)
          handler: handleClaimedFinalYield
